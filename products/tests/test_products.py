import random
import unittest
from typing import Dict, List
from unittest.mock import patch, Mock

import requests

from products.parse import Products
from products.request import ProductRequest


class MockResponse:

    def __init__(self):
        pass

    def get_product(self, current_price: float) -> Dict:
        return {
            'asin': 'B092W1R4SD',
            'title': 'layajia Water Bottle, 34oz Nonslip Gallon Water Bottle',
            'image': 'https://m.media-amazon.com/images/I/71iTxQd3c6S._AC_UL320_.jpg',
            'full_link': 'https://www.amazon.com/dp/B092W1R4SD/?psc=1',
            'prices':
                {
                    'current_price': current_price,
                    'previous_price': -1.0,
                    'currency': '$'
                },
            'reviews': {
                'total_reviews': 178,
                'stars': 4.5
            },
            'prime': True
        }

    def get_products_price_higher_than_minus_one(
        self,
        *args, **kwargs
    ) -> Mock:
        mock_response: Mock = Mock()

        mock_response.status_code = 200

        invalid_price_products: List = [
            self.get_product(current_price=-1.0) for _ in range(10)
        ]

        valid_price_products: List = [
            self.get_product(current_price=130.0) for _ in range(10)
        ]

        products = invalid_price_products + valid_price_products
        random.shuffle(products)

        mock_response.json.return_value = {
            'error': False,
            'current_page': 1,
            'next_page': 2,
            'results': products
        }

        print(mock_response.json.return_value)
        return mock_response


class TestProducts(unittest.TestCase):

    # {'error': False, 'current_page': 1, 'next_page': 2, 'results': [{'asin': 'B092W1R4SD', 'title': 'layajia Water Bottle, 34oz Nonslip Gallon Water Bottle, Leakproof BPA Free Tritan Sports Water Jug with Removable Strainer, Suitable for Gym Outdoor Sport, Campus, Ensure that Drink Enough Water', 'image': 'https://m.media-amazon.com/images/I/71iTxQd3c6S._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B092W1R4SD/?psc=1', 'prices': {'current_price': 17.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 178, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B083G9Y6S4', 'title': 'Hydro Flask Water Bottle - Stainless Steel, Reusable, Vacuum Insulated- Wide Mouth with Leak Proof Flex Cap', 'image': 'https://m.media-amazon.com/images/I/513AsmIU9uS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B083G9Y6S4/?psc=1', 'prices': {'current_price': 64.63, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 19816, 'stars': 4.8}, 'prime': True, 'sponsored': True}, {'asin': 'B085DVNHHK', 'title': 'Owala FreeSip Insulated Stainless Steel Water Bottle with Straw for Sports and Travel, BPA-Free, 32-Ounce, Shy Marshmallow', 'image': 'https://m.media-amazon.com/images/I/61gnp0RF+QS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085DVNHHK/?psc=1', 'prices': {'current_price': 29.96, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 8628, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B00WH2NKRO', 'title': 'Pogo BPA-Free Plastic Water Bottle with Chug Lid', 'image': 'https://m.media-amazon.com/images/I/71Jf8gGTbSL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B00WH2NKRO/?psc=1', 'prices': {'current_price': 8.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 31148, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B094X6N4PG', 'title': 'AQUAFIT Half Gallon Water Bottle with Straw Half Gallon Water Jug Motivational Water Bottle 64 Ounce Water Bottle with Time Marker Large Water Bottle Big Water Bottle 1/2 Gallon Water Jug Big Water Jug Gray', 'image': 'https://m.media-amazon.com/images/I/71ufLdyMYJL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B094X6N4PG/?psc=1', 'prices': {'current_price': 17.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 21, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B08SMP4PJ1', 'title': 'Goodful 24 Oz. Double Wall Vacuum Sealed, Insulated Water Bottle with Two Interchangeable Lids, Sipping or Chugging Lids, Leak-Proof, Wide Mouth for Drinking and Cleaning, Teal', 'image': 'https://m.media-amazon.com/images/I/617cwfbLg9S._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08SMP4PJ1/?psc=1', 'prices': {'current_price': 13.49, 'previous_price': 17.99, 'currency': '$'}, 'reviews': {'total_reviews': 26, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B07X8DD397', 'title': 'Iron Flask Sports Water Bottle - 32 Oz, 3 Lids (Straw Lid),Vacuum Insulated Stainless Steel, Double Walled, Thermo Mug, Metal Canteen', 'image': 'https://m.media-amazon.com/images/I/71ZGHBTYjwL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07X8DD397/?psc=1', 'prices': {'current_price': 25.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 77623, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B089RGRCHP', 'title': 'EYQ 32 oz Water Bottle with Time Marker, Carry Strap, Leak-Proof Tritan BPA-Free, Ensure You Drink Enough Water for Fitness, Gym, Camping, Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/61GyrQ5m91L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B089RGRCHP/?psc=1', 'prices': {'current_price': 14.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 5381, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B092W1R4SD', 'title': 'layajia Water Bottle, 34oz Nonslip Gallon Water Bottle, Leakproof BPA Free Tritan Sports Water Jug with Removable Strainer, Suitable for Gym Outdoor Sport, Campus, Ensure that Drink Enough Water', 'image': 'https://m.media-amazon.com/images/I/71iTxQd3c6S._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B092W1R4SD/?psc=1', 'prices': {'current_price': 17.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 178, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B07F6TKTBW', 'title': 'Thermoflask Double Stainless Steel Insulated Water Bottle, 40 oz, White', 'image': 'https://m.media-amazon.com/images/I/71dDzLe-WzL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07F6TKTBW/?psc=1', 'prices': {'current_price': 24.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 30452, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B08Y98C8YM', 'title': 'Alpex Eco-Flask 21 oz Hydration Bottle Blue', 'image': 'https://m.media-amazon.com/images/I/71uHlDlPJ0L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08Y98C8YM/?psc=1', 'prices': {'current_price': 19.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 5, 'stars': 5.0}, 'prime': True, 'sponsored': False}, {'asin': 'B077NQL3ZS', 'title': 'Contigo Autoseal Chill Stainless Steel Water Bottles, 24 Oz, SS/Monaco & Monaco, 2 Pack', 'image': 'https://m.media-amazon.com/images/I/71SoyG4-IzL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B077NQL3ZS/?psc=1', 'prices': {'current_price': 36.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 22427, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B08FXD5SNC', 'title': 'AQUAFIT 1 Gallon Water Bottle With Time Marker Large Water Bottle Gallon Water Bottle Motivational One Gallon Water Bottle With Straw 1 Gallon Water Jug With Time Marker 1 Gallon Big Water Bottle Gray', 'image': 'https://m.media-amazon.com/images/I/71zV64EWxDL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08FXD5SNC/?psc=1', 'prices': {'current_price': 24.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 7744, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B082XDVFFQ', 'title': 'Insulated Water Bottle with Straw - 32 oz Water Bottles - Triple Insulated Stainless Steel Water Bottles with 4 Leak-Proof Lids and 2 Straws. Reusable Water Bottle by Albor, Black', 'image': 'https://m.media-amazon.com/images/I/81uqbneCTnL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B082XDVFFQ/?psc=1', 'prices': {'current_price': 18.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1144, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B08ZSTH3Z3', 'title': 'NEEKFOX Water Bottle, 73OZ/0.6 Gallon Motivational Large Water Bottle with Straw & Time Marker, Leakproof BPA Free Big Water Jug, Wide Mouth Portable Water Bottle for Fitness Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/71kaCxOAdFS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08ZSTH3Z3/?psc=1', 'prices': {'current_price': 14.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 314, 'stars': 4.3}, 'prime': True, 'sponsored': False}, {'asin': 'B094HTD4Q5', 'title': '32 Oz Water Bottle, Akyta Sports Water Bottle with Two Lids, Straws,Vacuum-Insulated Stainless-Steel, Double-walled Water Bottle (Classic Black)', 'image': 'https://m.media-amazon.com/images/I/61eH4KlLUVS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B094HTD4Q5/?psc=1', 'prices': {'current_price': 19.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 65, 'stars': 4.5}, 'prime': True, 'sponsored': True}, {'asin': 'B08JP773T9', 'title': 'IRON °FLASK Sports Water Bottle - 24 Oz, 3 Lids (Spout Lid), Vacuum Insulated Stainless Steel, Hot Cold, Double Walled, Thermo Mug, Standard Metal Canteen', 'image': 'https://m.media-amazon.com/images/I/61pQX0gFWTL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08JP773T9/?psc=1', 'prices': {'current_price': 23.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 5335, 'stars': 4.8}, 'prime': True, 'sponsored': True}, {'asin': 'B08DXGPG6W', 'title': 'Custom Bulk "Bullet Shape" Stainless Steel Water Bottles, 26 oz. Pack of 100, Personalized Text, Logo, Double Wall Insulated Modern Design, Silver', 'image': 'https://m.media-amazon.com/images/I/71An62iOK8L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08DXGPG6W/?psc=1', 'prices': {'current_price': 682.49, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1, 'stars': 4.0}, 'prime': False, 'sponsored': False}, {'asin': 'B095GQHBBZ', 'title': '32oz Motivational Water Bottle with Time Maker Leakproof Tritan BPA Free Wide Mouth Durable Sports Water Jug to Ensure You Drink Enough Water Daily for Fitness, Gym and Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/61VvDlUkheS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B095GQHBBZ/?psc=1', 'prices': {'current_price': 9.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 5, 'stars': 5.0}, 'prime': True, 'sponsored': False}, {'asin': 'B08DTQS7B7', 'title': 'GOSWAG 1 Gallon/128oz Water Bottle with Straw and Time Marker, Motivational BPA Free Leakproof Sports Water Jug for Fitness, Gym, Camping and Outdoor', 'image': 'https://m.media-amazon.com/images/I/71Xx1BnOF7S._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08DTQS7B7/?psc=1', 'prices': {'current_price': 19.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 761, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B083GB5ZQT', 'title': 'Hydro Flask Water Bottle with Straw Lid - Stainless Steel, Reusable, Vacuum Insulated- Wide Mouth', 'image': 'https://m.media-amazon.com/images/I/51srToMz+YS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B083GB5ZQT/?psc=1', 'prices': {'current_price': 49.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 32626, 'stars': 4.9}, 'prime': True, 'sponsored': False}, {'asin': 'B08QVGHNGH', 'title': 'CamelBak Chute Mag BPA Free Water Bottle with Tritan Renew', 'image': 'https://m.media-amazon.com/images/I/61On3ekA0cL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08QVGHNGH/?psc=1', 'prices': {'current_price': 15.0, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1123, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B091DXH1J2', 'title': '64 Water Bottle oz with Straw & Spout Lid, Coolflask Insulated Water Bottle Half Gallon Wide Mouth, Sweat-Proof BPA-Free Keep Cold for 48 Hrs or Hot for 24 Hrs, Magic Black', 'image': 'https://m.media-amazon.com/images/I/71rllphFwyS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B091DXH1J2/?psc=1', 'prices': {'current_price': 31.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1260, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B07MGKJGP3', 'title': 'Simple Modern Summit Insulated Water Bottle with Straw Lid 1 Liter Reusable Wide Mouth Stainless Steel Flask Thermos, 32oz (945ml), -Riptide', 'image': 'https://m.media-amazon.com/images/I/61-Ovi2RBjL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07MGKJGP3/?psc=1', 'prices': {'current_price': 21.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 34335, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B085QJ4RBJ', 'title': 'Hydracy Water Bottle with Time Marker -Large 1Liter 32oz BPA Free Water Bottle -Leak Proof & No Sweat Gym Bottle with Fruit Infuser Strainer -Ideal Gift for Fitness or Sports & Outdoors MoonlightGreen', 'image': 'https://m.media-amazon.com/images/I/91qr65cbJaS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085QJ4RBJ/?psc=1', 'prices': {'current_price': 22.97, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 8912, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B082W66DCJ', 'title': 'Giotto 32oz Leakproof BPA Free Drinking Water Bottle with Time Marker & Straw to Ensure You Drink Enough Water Throughout The Day for Fitness and Outdoor Enthusiasts', 'image': 'https://m.media-amazon.com/images/I/712w4g5Y9yL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B082W66DCJ/?psc=1', 'prices': {'current_price': 18.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 40116, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B07XRXFWD4', 'title': 'CamelBak Chute Mag Water Bottle, Insulated Stainless Steel', 'image': 'https://m.media-amazon.com/images/I/714jUqv3h8L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07XRXFWD4/?psc=1', 'prices': {'current_price': 34.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 10036, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B0897NQR6C', 'title': 'Opard 30oz Sports Water Bottle with Leak Proof Flip Top Lid BPA Free Tritan Reusable Plastic for Gym and Outdoor', 'image': 'https://m.media-amazon.com/images/I/51iBCVveObS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B0897NQR6C/?psc=1', 'prices': {'current_price': 12.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 2526, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B081J96GSW', 'title': 'Water Bottle With Time Marker - 1 bottle only- 32 OZ, 1 Liter, BPA Free Frosted Plastic - Motivational Reusable Water Bottle With Times To Drink - For Fitness, Sports, Gym, Travel And Outdoors - Leakproof, Durable', 'image': 'https://m.media-amazon.com/images/I/71MqXSvDq5L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B081J96GSW/?psc=1', 'prices': {'current_price': 19.99, 'previous_price': 23.99, 'currency': '$'}, 'reviews': {'total_reviews': 3617, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B082RFHYLQ', 'title': 'IRON °FLASK Retro Sports Water Bottle - 25 Oz, Vacuum Insulated Stainless Steel, Hot Cold, Double Walled, Thermo Mug, Cola Metal Canteen', 'image': 'https://m.media-amazon.com/images/I/711WMZ-QFML._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B082RFHYLQ/?psc=1', 'prices': {'current_price': 20.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 2405, 'stars': 4.7}, 'prime': True, 'sponsored': True}, {'asin': 'B07GLZYP9B', 'title': 'Nathan LittleShot BPA- Free Water Bottle, Narrow & Wide Mouth, 24oz/ 750ml', 'image': 'https://m.media-amazon.com/images/I/51t5MTEv6qL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07GLZYP9B/?psc=1', 'prices': {'current_price': 5.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 900, 'stars': 4.6}, 'prime': True, 'sponsored': True}, {'asin': 'B07DKJ2NVR', 'title': 'DRINCO Stainless Steel Water Bottle Spout Lid Vacuum Insulated Double Wall Water Bottle Wide Mouth (32oz 22oz) Leak Proof Keeps Cold or Hot (22 oz, 22oz Black)', 'image': 'https://m.media-amazon.com/images/I/81NC1KmJ7HL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07DKJ2NVR/?psc=1', 'prices': {'current_price': 18.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 4159, 'stars': 4.8}, 'prime': True, 'sponsored': True}, {'asin': 'B08B1VTTB9', 'title': 'Triple-Insulated Stainless Steel Water Bottle with Straw Lid - Flip-Top Lid - Wide-Mouth Cap (25 Oz) Insulated Water Bottles, Keeps Hot and Cold - Sports Canteen Water Bottle Great for Hiking & Biking', 'image': 'https://m.media-amazon.com/images/I/81HHI2mPzEL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08B1VTTB9/?psc=1', 'prices': {'current_price': 15.29, 'previous_price': 19.99, 'currency': '$'}, 'reviews': {'total_reviews': 10247, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B08FBYN6PK', 'title': '64oz Leakproof Free Drinking Water Bottle with Motivational Time Marker BPA Free for Fitness, Gym and Outdoor Sports (Navy/Green Gradient)', 'image': 'https://m.media-amazon.com/images/I/71NbK9uoqKL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08FBYN6PK/?psc=1', 'prices': {'current_price': 18.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 5391, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B085TRXPRJ', 'title': 'MILTON Water Bottle Kids Reusable Leakproof 12 Oz Plastic Wide Mouth Large Big Drink Bottle BPA & Leak Free with Handle Strap Carrier for Cycling Camping Hiking Gym Yoga', 'image': 'https://m.media-amazon.com/images/I/81bX4o7xXLL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085TRXPRJ/?psc=1', 'prices': {'current_price': 14.59, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 2835, 'stars': 4.3}, 'prime': True, 'sponsored': False}, {'asin': 'B0878R9YQN', 'title': 'Giotto Large 1 Gallon Motivational Water Bottle with Paracord Handle & Removable Straw - Leakproof Tritan BPA Free Fitness Sports Water Jug with Time Marker to Ensure You Drink Enough Water Daily', 'image': 'https://m.media-amazon.com/images/I/71iygo7QTkL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B0878R9YQN/?psc=1', 'prices': {'current_price': 20.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 20759, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B08BNPC1B7', 'title': 'Fidus 32oz Leakproof Tritran BPA Free Water Bottle with Motivational Time Marker to Ensure You Drink Enough Water Daily for Fitness, Gym and Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/81kMyHyf9WL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08BNPC1B7/?psc=1', 'prices': {'current_price': 11.89, 'previous_price': 17.99, 'currency': '$'}, 'reviews': {'total_reviews': 14459, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B00TNIK6P4', 'title': 'Nalgene Wide Mouth Water Bottle', 'image': 'https://m.media-amazon.com/images/I/71yXE2dXkLL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B00TNIK6P4/?psc=1', 'prices': {'current_price': 11.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 46835, 'stars': 4.9}, 'prime': True, 'sponsored': False}, {'asin': 'B075W1N921', 'title': 'Takeya Originals Vacuum-Insulated Stainless-Steel Water Bottle, 40oz, Graphite (50025)', 'image': 'https://m.media-amazon.com/images/I/71TCJlZV8bL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B075W1N921/?psc=1', 'prices': {'current_price': 23.57, 'previous_price': 34.99, 'currency': '$'}, 'reviews': {'total_reviews': 30669, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B09BV3VM6R', 'title': 'SRISE 32 oz Water Bottles with Time Marker to Drink Motivational Water Bottle with Straw BPA-free Non-toxic Leak-proof Reusable Bottle Suitable for Gym Running Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/71j7pELdNjL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B09BV3VM6R/?psc=1', 'prices': {'current_price': 9.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 612, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B085DTS948', 'title': 'Owala Flip Insulated Stainless Steel Water Bottle with Straw for Sports and Travel, BPA-Free, 32-Ounce, Hint of Grape', 'image': 'https://m.media-amazon.com/images/I/71KF7zrdMxL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085DTS948/?psc=1', 'prices': {'current_price': 29.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1770, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B08GHTV5V3', 'title': 'Elvira 32oz Motivational Fitness Sports Water Bottle with Time Marker & Removable Strainer,Fast Flow,Flip Top Leakproof Durable BPA Free Non-Toxic', 'image': 'https://m.media-amazon.com/images/I/810FZrOSqKL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08GHTV5V3/?psc=1', 'prices': {'current_price': 16.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 11939, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B093T5Z816', 'title': 'GrandTies 2 Lids Sports Stainless Steel Water Bottle– 24oz, Reusable Wide Mouth Vacuum Insulated Water Bottles, Travel Metal Canteen, Coldest Water bottle for Men and Women– Ivory White', 'image': 'https://m.media-amazon.com/images/I/51r4AnXRs6L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B093T5Z816/?psc=1', 'prices': {'current_price': 21.9, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 11, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B086TT1TVF', 'title': 'Elvira 32oz Vacuum Insulated Stainless Steel Water Bottle with Straw & Spout Lids, Double Wall Sweat-Proof BPA Free to Keep Beverages Cold for 24Hrs or Hot for 12Hrs', 'image': 'https://m.media-amazon.com/images/I/710xkpORmxL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B086TT1TVF/?psc=1', 'prices': {'current_price': 17.58, 'previous_price': 22.99, 'currency': '$'}, 'reviews': {'total_reviews': 10220, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B00YYBBYN8', 'title': 'Contigo Autospout Ashland Water Bottle, 24oz , Monaco', 'image': 'https://m.media-amazon.com/images/I/61beIm8thTL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B00YYBBYN8/?psc=1', 'prices': {'current_price': 13.26, 'previous_price': 13.99, 'currency': '$'}, 'reviews': {'total_reviews': 4236, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B0868NCDH7', 'title': 'Fidus Large 1 Gallon/128oz Motivational Water Bottle with Time Marker & Straw,Leakproof Tritan BPA Free Water Jug,Ensure You Drink Enough Water Daily for Fitness,Gym and Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/7144-qLbm5L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B0868NCDH7/?psc=1', 'prices': {'current_price': 20.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 22958, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B01KXHH62Y', 'title': 'Hydro Flask Water Bottle - Stainless Steel, Reusable, Vacuum Insulated with Standard Mouth Flex Lid', 'image': 'https://m.media-amazon.com/images/I/61rjkR4gPiS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B01KXHH62Y/?psc=1', 'prices': {'current_price': 34.95, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 23927, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B08GG5TZXG', 'title': 'BJPKPK Stainless Steel Water Bottles -17Oz/500ml -Insulated Water bottles Keep cold for 24 Hours and hot for 12 Hours, Metal water bottles, BPA Free - School water bottles', 'image': 'https://m.media-amazon.com/images/I/61lAAvVqBJS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08GG5TZXG/?psc=1', 'prices': {'current_price': 12.99, 'previous_price': 16.91, 'currency': '$'}, 'reviews': {'total_reviews': 442, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B07T5X5F3C', 'title': 'H2O Capsule 2.2L Half Gallon Water Bottle with Storage Sleeve and Covered Straw Lid – BPA Free Large Reusable Drink Container with Handle - Big Sports Jug, 2.2 Liter (74 Ounce)', 'image': 'https://m.media-amazon.com/images/I/81EkjAZiLaL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07T5X5F3C/?psc=1', 'prices': {'current_price': 30.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1958, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B07S2GCFP5', 'title': 'The Coldest Water Bottle - 32 oz Sports Wide Mouth Hot Cold, Modern Double Walled, Simple Thermo Mug, Metal Canteen Cold 36+ Hrs - Flip Top Wide Mouth 2.0 (Mint Green)', 'image': 'https://m.media-amazon.com/images/I/71qu4LSDeDL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B07S2GCFP5/?psc=1', 'prices': {'current_price': 39.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 10897, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B0936HGCVR', 'title': 'Water Bottle 32oz with Straw, Motivational Water Mug with Time Marker & Buckle Strap,Leak-Proof Tritan BPA-Free, Ensure You Drink Enough Water for Fitness, Gym, Camping, Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/71SN-AgjrLS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B0936HGCVR/?psc=1', 'prices': {'current_price': 16.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 336, 'stars': 4.6}, 'prime': True, 'sponsored': False}, {'asin': 'B097XVC5NG', 'title': 'AOYATEC Half Gallon/64oz Motivational Water Bottle with Time Marker & Straw,Leakproof Tritan BPA Free Water Jug for Fitness,Gym and Outdoor Sports (Purple)', 'image': 'https://m.media-amazon.com/images/I/71MjQycoopS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B097XVC5NG/?psc=1', 'prices': {'current_price': 18.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 79, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B08RSNG7R1', 'title': 'Contigo AUTOPOP Water Bottle, 20oz, Blue Corn Lid', 'image': 'https://m.media-amazon.com/images/I/71i0jHS2r2L._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B08RSNG7R1/?psc=1', 'prices': {'current_price': 15.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1351, 'stars': 4.7}, 'prime': True, 'sponsored': False}, {'asin': 'B083B75VJP', 'title': 'Elvira 32oz Large Water Bottle with Motivational Time Marker & Removable Strainer,Fast Flow BPA Free Non-Toxic for Fitness, Gym and Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/717BX9Tg1zS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B083B75VJP/?psc=1', 'prices': {'current_price': 11.04, 'previous_price': 16.99, 'currency': '$'}, 'reviews': {'total_reviews': 15552, 'stars': 4.8}, 'prime': True, 'sponsored': False}, {'asin': 'B092QT65ZL', 'title': 'NEEKFOX Water Bottle, 34oz Anti-slip Gallon Water Bottle, Leakproof BPA Free Tritan Water Jug with Removable Strainer & Protective Silicone Boot for Fitness, Gym and Outdoor Sports', 'image': 'https://m.media-amazon.com/images/I/71xXMd10iFS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B092QT65ZL/?psc=1', 'prices': {'current_price': 9.99, 'previous_price': 12.99, 'currency': '$'}, 'reviews': {'total_reviews': 189, 'stars': 4.5}, 'prime': True, 'sponsored': False}, {'asin': 'B097RDRRFF', 'title': 'AMITER Large 1 Gallon Water Bottle with Motivational Time Marker, 128oz Water Bottle with Straw & Handle, BPA Free Leakproof Wide Mouth Sports Water Jug for Gym, Office, Home, Outdoor', 'image': 'https://m.media-amazon.com/images/I/81+xijqc5BL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B097RDRRFF/?psc=1', 'prices': {'current_price': 17.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1085, 'stars': 4.6}, 'prime': True, 'sponsored': True}, {'asin': 'B01MQMS6IM', 'title': 'Sportneer Insulated Water Bottle Stainless Steel Double Walled Water Bottles Cold for 24 Hours and Hot for 12 Hours, Included Bottle Brush, Perfect for Traveling & Sports -17oz /26oz', 'image': 'https://m.media-amazon.com/images/I/71wXwvhAQSL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B01MQMS6IM/?psc=1', 'prices': {'current_price': 12.59, 'previous_price': 13.99, 'currency': '$'}, 'reviews': {'total_reviews': 1505, 'stars': 4.6}, 'prime': True, 'sponsored': True}, {'asin': 'B085DTS948', 'title': 'Owala Flip Insulated Stainless Steel Water Bottle with Straw for Sports and Travel, BPA-Free, 32-Ounce, Hint of Grape', 'image': 'https://m.media-amazon.com/images/I/71KF7zrdMxL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085DTS948/?psc=1', 'prices': {'current_price': 29.99, 'previous_price': -1.0, 'currency': '$'}, 'reviews': {'total_reviews': 1770, 'stars': 4.6}, 'prime': True, 'sponsored': True}]}
    # [{'title': 'layajia Water Bottle, 34oz Nonslip Gallon Water Bottle, Leakproof BPA Free Tritan Sports Water Jug with Removable Strainer, Suitable for Gym Outdoor Sport, Campus, Ensure that Drink Enough Water', 'image': 'https://m.media-amazon.com/images/I/71iTxQd3c6S._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B092W1R4SD/?psc=1', 'current_price': 17.99, 'currency': '$'}, {'title': 'Hydro Flask Water Bottle - Stainless Steel, Reusable, Vacuum Insulated- Wide Mouth with Leak Proof Flex Cap', 'image': 'https://m.media-amazon.com/images/I/513AsmIU9uS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B083G9Y6S4/?psc=1', 'current_price': 64.63, 'currency': '$'}, {'title': 'Owala FreeSip Insulated Stainless Steel Water Bottle with Straw for Sports and Travel, BPA-Free, 32-Ounce, Shy Marshmallow', 'image': 'https://m.media-amazon.com/images/I/61gnp0RF+QS._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B085DVNHHK/?psc=1', 'current_price': 29.96, 'currency': '$'}, {'title': 'Pogo BPA-Free Plastic Water Bottle with Chug Lid', 'image': 'https://m.media-amazon.com/images/I/71Jf8gGTbSL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B00WH2NKRO/?psc=1', 'current_price': 8.99, 'currency': '$'}, {'title': 'AQUAFIT Half Gallon Water Bottle with Straw Half Gallon Water Jug Motivational Water Bottle 64 Ounce Water Bottle with Time Marker Large Water Bottle Big Water Bottle 1/2 Gallon Water Jug Big Water Jug Gray', 'image': 'https://m.media-amazon.com/images/I/71ufLdyMYJL._AC_UL320_.jpg', 'full_link': 'https://www.amazon.com/dp/B094X6N4PG/?psc=1', 'current_price': 17.99, 'currency': '$'}]

    # @patch.object(target=requests,
    #               attribute='get',
    #               side_effect=MockResponse().get_products_price_higher_than_minus_one

    def test_products_price_higher_than_minus_one(self, *args, **kwargs):
        request = ProductRequest()

        mocked_product_response = patch.object(
            target=requests,
            attribute='get',
            side_effect=[
                MockResponse().get_products_price_higher_than_minus_one()
            ]
        )

        with mocked_product_response:
            res: requests.Response = request.get(
                params={
                    'country': 'US',
                    'query': 'Water bottle'
                }
            )

        res_data: Dict = res.json()
        print(res_data)
        print(len(res_data['results']))

        products = Products(res_data, amount=5).get()

        print(products)
